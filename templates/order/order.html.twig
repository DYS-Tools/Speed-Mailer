{% extends 'base.html.twig' %} 

{% block title %}Order{% endblock %}

{% block body %}
    <!-- Main -->
    
    <div class="padding">
            {{ include('order/paymentForm.html.twig') }}

            <hr>
            <p> Payer via la modale
            <form action="{{path('order')}}" method="POST">
              <script
                src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                data-key="{{ stripe_public_key }}"
                data-amount="500"
                data-name="Stripe.com"
                data-description="Secure Payment"
                data-locale="auto">
              </script>
          </form>
          <br/<br/><br/>

          <!--
          <hr>
          { { form_start(formPay) }}
            { { form_widget(formPay) }}
            <button type="submit" class="btn btn-success pull-right">Payer</button>
          { { form_end(formPay) }}
          -->

          <hr>

        <a href="{{path('pay') }}"> Test Bouton paiement</a>
        <hr>
         <p> Formulaire de paiement API Element </p>


        <form action="{{ path('pay') }}" method="post" id="payment-form">
          <div class="form-row inline">
            <div class="col">
              <label for="name">
                Name
              </label>
              <input id="name" name="name" placeholder="Jenny Rosen" required>
            </div>
            <div class="col">
              <label for="email">
                Email Address
              </label>
              <input id="email" name="email" type="email" placeholder="jenny.rosen@example.com" required>
            </div>
          </div>

          <div class="form-row">
            <label for="iban-element">
              IBAN
            </label>
            <div id="iban-element">
              <!-- A Stripe Element will be inserted here. -->
            </div>
          </div>
          <div id="bank-name"></div>

          <button>Submit Payment</button>

          <!-- Used to display form errors. -->
          <div id="error-message" role="alert"></div>

          <!-- Display mandate acceptance text. -->
          <div id="mandate-acceptance">
            By providing your IBAN and confirming this payment, you are
            authorizing Rocketship Inc. and Stripe, our payment service
            provider, to send instructions to your bank to debit your account and
            your bank to debit your account in accordance with those instructions.
            You are entitled to a refund from your bank under the terms and
            conditions of your agreement with your bank. A refund must be claimed
            within 8 weeks starting from the date on which your account was debited.
          </div>
        </form>
          
    </div>
  


{% endblock %}

{% block javascript %}
<script src="{{ asset('js/payment.js') }}"></script>
    {{ parent() }} 
   
<script>
      var stripe = Stripe('{{ stripe_public_key}}');
      var elements = stripe.elements();


      stripe.redirectToCheckout({
  // Make the id field from the Checkout Session creation API response
  // available to this file, so you can provide it as parameter here
  // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
  sessionId: '{{CHECKOUT_SESSION_ID}}'
}).then(function (result) {
  // If `redirectToCheckout` fails due to a browser or network
  // error, display the localized error message to your customer
  // using `result.error.message`.
});
</script
{% endblock %}